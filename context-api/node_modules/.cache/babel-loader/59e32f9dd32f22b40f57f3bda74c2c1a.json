{"ast":null,"code":"import _objectSpread from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/howardreith/workspace/redux-demo/context-api/src/AppProvider.js\";\nimport React from 'react';\nimport { emptyBoard, NONE, score } from \"./helpers\";\nexport var AppContext = React.createContext();\n\nvar AppProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AppProvider, _React$Component);\n\n  function AppProvider(props) {\n    var _this;\n\n    _classCallCheck(this, AppProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppProvider).call(this, props));\n    _this.takeTurn = _this.takeTurn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.resetGame = _this.resetGame.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      gameBoard: emptyBoard,\n      winner: null,\n      player: 'X',\n      xWins: 0,\n      oWins: 0\n    };\n    return _this;\n  }\n\n  _createClass(AppProvider, [{\n    key: \"takeTurn\",\n    value: function takeTurn(action) {\n      if (this.state.winner || this.state.gameBoard[action.row][action.square] !== NONE) {\n        return this.state;\n      } // clone the array so we don't mutate the existing state\n\n\n      var gameBoard = this.state.gameBoard.map(function (r) {\n        return r.slice(0);\n      });\n      gameBoard[action.row][action.square] = this.state.player;\n      var player = this.state.player === 'X' ? 'O' : 'X';\n      var winner = score(gameBoard);\n      var xWins = winner === 'X' ? this.state.xWins + 1 : this.state.xWins;\n      var oWins = winner === 'O' ? this.state.oWins + 1 : this.state.oWins;\n      return _objectSpread({}, this.state, {\n        player: player,\n        winner: winner,\n        gameBoard: gameBoard,\n        xWins: xWins,\n        oWins: oWins\n      });\n    }\n  }, {\n    key: \"resetGame\",\n    value: function resetGame() {\n      this.setState(_objectSpread({}, this.state, {\n        gameBoard: emptyBoard,\n        winner: null\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppContext.Provider, {\n        value: {\n          state: this.state,\n          takeTurn: this.takeTurn,\n          resetGame: this.resetGame\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AppProvider;\n}(React.Component);\n\nexport { AppProvider as default };\nexport function withAppContext(Component) {\n  return function WrapperComponent(props) {\n    return React.createElement(AppContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, function (state) {\n      return React.createElement(Component, Object.assign({}, props, {\n        appContext: state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }));\n    });\n  };\n}","map":{"version":3,"sources":["/home/howardreith/workspace/redux-demo/context-api/src/AppProvider.js"],"names":["React","emptyBoard","NONE","score","AppContext","createContext","AppProvider","props","takeTurn","bind","resetGame","state","gameBoard","winner","player","xWins","oWins","action","row","square","map","r","slice","setState","children","Component","withAppContext","WrapperComponent"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,EAAoBC,IAApB,EAA0BC,KAA1B,QAAsC,WAAtC;AAEA,OAAO,IAAMC,UAAU,GAAGJ,KAAK,CAACK,aAAN,EAAnB;;IAEcC,W;;;;;AACjB,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,qFAAMA,KAAN;AAEA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,uDAAhB;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,uDAAjB;AAEA,UAAKE,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAEX,UADF;AAETY,MAAAA,MAAM,EAAE,IAFC;AAGTC,MAAAA,MAAM,EAAE,GAHC;AAITC,MAAAA,KAAK,EAAE,CAJE;AAKTC,MAAAA,KAAK,EAAE;AALE,KAAb;AANe;AAalB;;;;6BAGQC,M,EAAQ;AACb,UAAI,KAAKN,KAAL,CAAWE,MAAX,IAAqB,KAAKF,KAAL,CAAWC,SAAX,CAAqBK,MAAM,CAACC,GAA5B,EAAiCD,MAAM,CAACE,MAAxC,MAAoDjB,IAA7E,EAAmF;AAC/E,eAAO,KAAKS,KAAZ;AACH,OAHY,CAKb;;;AACA,UAAIC,SAAS,GAAG,KAAKD,KAAL,CAAWC,SAAX,CAAqBQ,GAArB,CAAyB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,KAAF,CAAQ,CAAR,CAAJ;AAAA,OAA1B,CAAhB;AACAV,MAAAA,SAAS,CAACK,MAAM,CAACC,GAAR,CAAT,CAAsBD,MAAM,CAACE,MAA7B,IAAuC,KAAKR,KAAL,CAAWG,MAAlD;AAEA,UAAMA,MAAM,GAAG,KAAKH,KAAL,CAAWG,MAAX,KAAsB,GAAtB,GAA4B,GAA5B,GAAkC,GAAjD;AACA,UAAMD,MAAM,GAAGV,KAAK,CAACS,SAAD,CAApB;AACA,UAAMG,KAAK,GAAGF,MAAM,KAAK,GAAX,GAAiB,KAAKF,KAAL,CAAWI,KAAX,GAAmB,CAApC,GAAwC,KAAKJ,KAAL,CAAWI,KAAjE;AACA,UAAMC,KAAK,GAAGH,MAAM,KAAK,GAAX,GAAiB,KAAKF,KAAL,CAAWK,KAAX,GAAmB,CAApC,GAAwC,KAAKL,KAAL,CAAWK,KAAjE;AAEA,+BAAW,KAAKL,KAAhB;AAAuBG,QAAAA,MAAM,EAANA,MAAvB;AAA+BD,QAAAA,MAAM,EAANA,MAA/B;AAAuCD,QAAAA,SAAS,EAATA,SAAvC;AAAkDG,QAAAA,KAAK,EAAEA,KAAzD;AAAgEC,QAAAA,KAAK,EAAEA;AAAvE;AACH;;;gCAEW;AACR,WAAKO,QAAL,mBAAkB,KAAKZ,KAAvB;AAA8BC,QAAAA,SAAS,EAAEX,UAAzC;AAAqDY,QAAAA,MAAM,EAAE;AAA7D;AACH;;;6BAEQ;AACL,aACI,oBAAC,UAAD,CAAY,QAAZ;AAAqB,QAAA,KAAK,EAAE;AAACF,UAAAA,KAAK,EAAE,KAAKA,KAAb;AAAoBH,UAAAA,QAAQ,EAAE,KAAKA,QAAnC;AAA6CE,UAAAA,SAAS,EAAE,KAAKA;AAA7D,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKH,KAAL,CAAWiB,QADhB,CADJ;AAKH;;;;EA5CoCxB,KAAK,CAACyB,S;;SAA1BnB,W;AA+CrB,OAAO,SAASoB,cAAT,CAAwBD,SAAxB,EAAmC;AACtC,SAAO,SAASE,gBAAT,CAA0BpB,KAA1B,EAAiC;AACpC,WACI,oBAAC,UAAD,CAAY,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,UAAAI,KAAK;AAAA,aAAI,oBAAC,SAAD,oBAAeJ,KAAf;AAAsB,QAAA,UAAU,EAAEI,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAJ;AAAA,KADV,CADJ;AAKH,GAND;AAOH","sourcesContent":["import React from 'react';\nimport {emptyBoard, NONE, score} from \"./helpers\";\n\nexport const AppContext = React.createContext();\n\nexport default class AppProvider extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.takeTurn = this.takeTurn.bind(this)\n        this.resetGame = this.resetGame.bind(this)\n\n        this.state = {\n            gameBoard: emptyBoard,\n            winner: null,\n            player: 'X',\n            xWins: 0,\n            oWins: 0,\n        };\n    }\n\n\n    takeTurn(action) {\n        if (this.state.winner || this.state.gameBoard[action.row][action.square] !== NONE) {\n            return this.state;\n        }\n\n        // clone the array so we don't mutate the existing state\n        let gameBoard = this.state.gameBoard.map(r => r.slice(0));\n        gameBoard[action.row][action.square] = this.state.player;\n\n        const player = this.state.player === 'X' ? 'O' : 'X';\n        const winner = score(gameBoard);\n        const xWins = winner === 'X' ? this.state.xWins + 1 : this.state.xWins;\n        const oWins = winner === 'O' ? this.state.oWins + 1 : this.state.oWins;\n\n        return {...this.state, player, winner, gameBoard, xWins: xWins, oWins: oWins};\n    }\n\n    resetGame() {\n        this.setState({...this.state, gameBoard: emptyBoard, winner: null})\n    }\n\n    render() {\n        return (\n            <AppContext.Provider value={{state: this.state, takeTurn: this.takeTurn, resetGame: this.resetGame}}>\n                {this.props.children}\n            </AppContext.Provider>\n        );\n    }\n}\n\nexport function withAppContext(Component) {\n    return function WrapperComponent(props) {\n        return (\n            <AppContext.Consumer>\n                {state => <Component {...props} appContext={state} />}\n            </AppContext.Consumer>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}