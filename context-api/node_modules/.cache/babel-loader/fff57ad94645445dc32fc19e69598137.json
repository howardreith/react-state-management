{"ast":null,"code":"import _objectSpread from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/howardreith/workspace/redux-demo/context-api/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/home/howardreith/workspace/redux-demo/context-api/src/AppProvider.js\";\nimport React from 'react';\nimport { emptyBoard, NONE, score } from \"./helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var AppContext = /*#__PURE__*/React.createContext();\n\nvar AppProvider = /*#__PURE__*/function (_React$Component) {\n  _inherits(AppProvider, _React$Component);\n\n  var _super = _createSuper(AppProvider);\n\n  function AppProvider(props) {\n    var _this;\n\n    _classCallCheck(this, AppProvider);\n\n    _this = _super.call(this, props);\n    _this.takeTurn = _this.takeTurn.bind(_assertThisInitialized(_this));\n    _this.resetGame = _this.resetGame.bind(_assertThisInitialized(_this));\n    _this.state = {\n      gameBoard: emptyBoard,\n      winner: null,\n      player: 'X',\n      xWins: 0,\n      oWins: 0\n    };\n    return _this;\n  }\n\n  _createClass(AppProvider, [{\n    key: \"takeTurn\",\n    value: function takeTurn(action) {\n      if (this.state.winner || this.state.gameBoard[action.row][action.square] !== NONE) {\n        return;\n      } // clone the array so we don't mutate the existing state\n\n\n      var gameBoard = this.state.gameBoard.map(function (r) {\n        return r.slice(0);\n      });\n      gameBoard[action.row][action.square] = this.state.player;\n      var player = this.state.player === 'X' ? 'O' : 'X';\n      var winner = score(gameBoard);\n      var xWins = winner === 'X' ? this.state.xWins + 1 : this.state.xWins;\n      var oWins = winner === 'O' ? this.state.oWins + 1 : this.state.oWins;\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        player: player,\n        winner: winner,\n        gameBoard: gameBoard,\n        xWins: xWins,\n        oWins: oWins\n      }));\n    }\n  }, {\n    key: \"resetGame\",\n    value: function resetGame() {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        gameBoard: emptyBoard,\n        winner: null,\n        player: 'X'\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n        value: _objectSpread(_objectSpread({}, this.state), {}, {\n          onTakeTurn: this.takeTurn,\n          onResetGame: this.resetGame\n        }),\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return AppProvider;\n}(React.Component);\n\nexport { AppProvider as default };\nexport function withAppContext(Component) {\n  return function WrapperComponent(props) {\n    var _this2 = this;\n\n    return /*#__PURE__*/_jsxDEV(AppContext.Consumer, {\n      children: function children(state) {\n        return /*#__PURE__*/_jsxDEV(Component, _objectSpread(_objectSpread({}, props), {}, {\n          appContext: state\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 27\n        }, _this2);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this);\n  };\n}","map":{"version":3,"sources":["/home/howardreith/workspace/redux-demo/context-api/src/AppProvider.js"],"names":["React","emptyBoard","NONE","score","AppContext","createContext","AppProvider","props","takeTurn","bind","resetGame","state","gameBoard","winner","player","xWins","oWins","action","row","square","map","r","slice","setState","onTakeTurn","onResetGame","children","Component","withAppContext","WrapperComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {emptyBoard, NONE, score} from \"./helpers\";\n\nexport const AppContext = React.createContext();\n\nexport default class AppProvider extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.takeTurn = this.takeTurn.bind(this)\n        this.resetGame = this.resetGame.bind(this)\n\n        this.state = {\n            gameBoard: emptyBoard,\n            winner: null,\n            player: 'X',\n            xWins: 0,\n            oWins: 0,\n        };\n    }\n\n\n    takeTurn(action) {\n        if (this.state.winner || this.state.gameBoard[action.row][action.square] !== NONE) {\n            return\n        }\n\n        // clone the array so we don't mutate the existing state\n        let gameBoard = this.state.gameBoard.map(r => r.slice(0));\n        gameBoard[action.row][action.square] = this.state.player;\n\n        const player = this.state.player === 'X' ? 'O' : 'X';\n        const winner = score(gameBoard);\n        const xWins = winner === 'X' ? this.state.xWins + 1 : this.state.xWins;\n        const oWins = winner === 'O' ? this.state.oWins + 1 : this.state.oWins;\n\n        this.setState({...this.state, player, winner, gameBoard, xWins: xWins, oWins: oWins});\n    }\n\n    resetGame() {\n        this.setState({...this.state, gameBoard: emptyBoard, winner: null, player: 'X'})\n    }\n\n    render() {\n        return (\n            <AppContext.Provider value={{...this.state, onTakeTurn: this.takeTurn, onResetGame: this.resetGame}}>\n                {this.props.children}\n            </AppContext.Provider>\n        );\n    }\n}\n\nexport function withAppContext(Component) {\n    return function WrapperComponent(props) {\n        return (\n            <AppContext.Consumer>\n                {state => <Component {...props} appContext={state}/>}\n            </AppContext.Consumer>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}